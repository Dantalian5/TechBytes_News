function t(t,e){return t?new URL(`v0/item/${e}.json?print=pretty`,"https://hacker-news.firebaseio.com"):new URL(`v0/${e}.json?print=pretty`,"https://hacker-news.firebaseio.com")}async function e(t){let e=new Headers({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});try{let n=await fetch(t,{mode:"cors",method:"GET",headers:e});if(n.ok)return await n.json();throw Error(n.status)}catch(t){return{title:"Ups, something went wrong :(",by:"--",url:"--",time:"--",error:!0}}}const n=document.getElementById("js-navmenu__btn"),a=document.getElementById("js-themeInput"),s=document.getElementById("js-topStories"),d=document.getElementById("js-newsGrid");let i=0;async function o(n,a,s,d,i,o=!1){let c=[];!function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(d);for(let t=0;t<s;t++)c.push(function(){let t=document.createElement("div");return t.classList.add("card","card--line-bottom","loading"),t}()),d.appendChild(c[t]);let l=await e(t(!1,n));c.forEach((n,s)=>{e(t(!0,l[s+10*a])).then(t=>{!function(t,e,n,...a){n=void 0!=n?n:"short";let s="#"+a[0],d=void 0!=a[1]?a[1]:"Sorry, there's a problem with the service, please try later :(",i=void 0!=a[2]?a[2]:":(",o=void 0!=a[3]?a[3]:"#",c=new Date(1e3*a[4]).toLocaleDateString("en-US",{weekday:"short",year:"2-digit",month:"2-digit",day:"2-digit",hourCycle:"h24",hour:"numeric",minute:"numeric"}),l=document.createElement("p");l.classList.add("card__number","f-heading","f-heading--M"),l.textContent=s,e.appendChild(l);let r=document.createElement("a");if(r.classList.add("card__title","f-heading","f-heading--M"),r.textContent=d,r.href=o,e.appendChild(r),t){let t=document.createElement("p");t.classList.add("card__author","f-body","f-body--M"),t.textContent="Please, try again later",e.appendChild(t),e.classList.add("js-cardError")}else{let t=document.createElement("p");t.classList.add("card__author","f-body","f-body--M"),t.textContent="by: ";let a=document.createElement("span");a.classList.add("card--accent"),a.textContent=i,t.appendChild(a);let s=document.createElement("p");s.classList.add("card__url","f-body","f-body--M"),s.textContent="link: ";let d=document.createElement("a");d.classList.add("card--accent"),d.textContent=o,d.href=o,s.appendChild(d);let l=document.createElement("p");l.classList.add("card__time","f-body","f-body--S"),l.textContent=c,e.appendChild(t),"long"===n?(e.appendChild(s),e.appendChild(l)):(e.classList.remove("card--line-bottom"),e.classList.add("card--line-top"))}e.classList.remove("loading")}(t.error,n,i,s+1+10*a,t.title,t.by,t.url,t.time)})}),o&&!l.error&&function(t,e){let n=document.getElementById("js-newsNav"),a=[],s=Math.ceil(t/10);for(;n.firstChild;)n.removeChild(n.firstChild);a[0]=document.createElement("span"),a[0].classList.add("news-navigation__item"),a[0].textContent=1,a[4]=document.createElement("span"),a[4].classList.add("news-navigation__item"),a[4].textContent=s,a[1]=document.createElement("span"),a[2]=document.createElement("span"),a[3]=document.createElement("span"),0===e?(a[1].classList.add("news-navigation__item"),a[1].textContent=e+2,a[2].classList.add("news-navigation__item"),a[2].textContent=e+3,a[3].textContent="...",a[0].classList.add("selected")):1===e?(a[1].classList.add("news-navigation__item"),a[1].textContent=e+1,a[2].classList.add("news-navigation__item"),a[2].textContent=e+2,a[3].textContent="...",a[1].classList.add("selected")):e>1&&e<s-2?(a[1].textContent="...",a[2].classList.add("news-navigation__item"),a[2].textContent=e+1,a[3].textContent="...",a[2].classList.add("selected")):e===s-3?(a[1].textContent="...",a[2].classList.add("news-navigation__item"),a[2].textContent=e+1,a[3].classList.add("news-navigation__item"),a[3].textContent=e+2,a[2].classList.add("selected")):e===s-2?(a[1].textContent="...",a[2].classList.add("news-navigation__item"),a[2].textContent=e,a[3].classList.add("news-navigation__item"),a[3].textContent=e+1,a[3].classList.add("selected")):e===s-1&&(a[1].textContent="...",a[2].classList.add("news-navigation__item"),a[2].textContent=e-1,a[3].classList.add("news-navigation__item"),a[3].textContent=e,a[4].classList.add("selected"));for(let t=0;t<5;t++)n.appendChild(a[t])}(l.length,a)}"light"===localStorage.getItem("TBN-theme")&&(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark"),a.checked=!0),o("topstories",0,3,s,"short"),o("newstories",i,10,d,"long",!0),document.addEventListener("click",t=>{t.target.closest(".news-navigation__btn")?("Prev"===t.target.textContent&&i>0?i-=1:"Next"===t.target.textContent&&i<50&&(i+=1),o("newstories",i,10,d,"long",!0)):t.target.closest(".news-navigation__item")&&o("newstories",i=Number(t.target.textContent)-1,10,d,"long",!0)}),document.addEventListener("click",t=>{t.target.closest("#js-navmenu__btn, #js-navmenu__items")?t.target.closest("#js-navmenu__btn")&&n.classList.toggle("is-active"):n.classList.remove("is-active")}),a.addEventListener("change",t=>{t.target.checked?(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark"),localStorage.setItem("TBN-theme","light")):(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light"),localStorage.setItem("TBN-theme","dark"))});
//# sourceMappingURL=main.4db5e028.js.map
